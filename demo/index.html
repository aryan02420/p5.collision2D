<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>p5.collision2D</title>
</head>

<body>
  <div id="canvas-element"></div>
  <p>scroll to change object</p>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.0/p5.min.js"></script>
  <script src="p5.collision2D.js"></script>
  <script >

      let sketch = function(p) {
        let c2d = new Collision2D(p)
        let point1, point11, line1, line11, box1, circle1
        let point2, line2, box2, circle2
        let static, follower;
        let shape = 0;

        p.mouseWheel = function(event) {
          shape += 1
          shape %= 4
          c2d.clearLayer('follower')
          c2d.addObjToLayer(follower[shape], 'follower')

        }

        p.setup = function() {
          p.createCanvas(200, 200)
          point1 = c2d.createCollisionPrimitive('POINT', 40,40)
          point11 = c2d.createCollisionPrimitive('POINT', 50,20)
          line1 = c2d.createCollisionPrimitive('LINE', 160,40,150,30)
          line11 = c2d.createCollisionPrimitive('LINE', 120,50,140,10)
          box1 = c2d.createCollisionPrimitive('BOX', 160,160,30,40)
          circle1 = c2d.createCollisionPrimitive('CIRCLE', 40,160,20)

          point2 = c2d.createCollisionPrimitive('POINT', 100,100)
          line2 = c2d.createCollisionPrimitive('LINE', 100,100,101,101)
          box2 = c2d.createCollisionPrimitive('BOX', 100,100,25,15)
          circle2 = c2d.createCollisionPrimitive('CIRCLE', 100,100,10)

          static = [point1, point11, line1, line11, box1, circle1]
          follower = [point2, line2, box2, circle2]

          c2d.addObjToLayer(static, 'static')
          c2d.setLayerStyle('follower', {fill: 100})
          c2d.setLayerStyle('static', {strokeweight: 2})

        }

        p.draw = function() {
          p.background(200)
          let f = follower[shape]
          if (f.type === 'LINE') {
            f.end = [p.mouseX-20, p.mouseY-20]
          } else {
            f.center = [p.mouseX-20, p.mouseY-20]
          }
          if ( c2d.getColliding('follower', 'static').length > 0) {
            p.background(200, 80, 100)
          }
          c2d.drawCollisionOverlays('static')
          c2d.drawCollisionOverlays('follower')
          //c2d.drawCollisionOverlays()
        }
        console.log(c2d)
      }

      let myp5 = new p5(sketch)
      
  </script>
</body>

</html>
